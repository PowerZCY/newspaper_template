<!DOCTYPE html>
<html lang="zh-CN" class="bg-neutral-100 dark:bg-neutral-900">
<head>
  <meta charset="UTF-8">
  <title>报纸模板原型</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- html2canvas for image export -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <!-- jsPDF for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    .newspaper-bg {
      background: #f5f5e5;
    }
    .dark .newspaper-bg {
      background: #232323;
    }
    .img-shadow {
      border-radius: 0.5rem;
      box-shadow: 0 4px 16px 0 rgba(0,0,0,0.10);
    }
    .editable:focus {
      outline: 2px solid #ac62fd;
      outline-offset: 2px;
      background: #f3e8ff;
    }
    .dark .editable:focus {
      background: #2a223a;
    }
    .ad-slot {
      background: #f3f6fa;
      color: #222;
      display: flex;
      align-items: center;
      justify-content: center;
      writing-mode: vertical-rl;
      font-size: 1.1rem;
      letter-spacing: 0.1em;
      border-radius: 0.5rem;
      min-width: 60px;
      max-width: 80px;
      min-height: 600px;
      margin: 0 8px;
    }
    .dark .ad-slot {
      background: #23272f;
      color: #aaa;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col bg-neutral-100 dark:bg-neutral-900 transition-colors duration-300">

  <!-- Header/Banner（仅示意，实际由主站统一） -->
  <header class="w-full h-16 flex items-center px-8 bg-white dark:bg-neutral-800 shadow z-10">
    <span class="font-bold text-xl text-purple-600">Re8ger</span>
    <nav class="ml-8 flex gap-6 text-neutral-700 dark:text-neutral-200">
      <a href="#" class="hover:text-purple-500">Docs</a>
      <a href="#" class="hover:text-purple-500">Blog</a>
    </nav>
    <div class="ml-auto flex items-center gap-4">
      <button id="theme-toggle" class="rounded px-2 py-1 border border-neutral-300 dark:border-neutral-700">切换主题</button>
      <button class="rounded px-3 py-1 bg-purple-500 text-white">Sign In</button>
    </div>
  </header>

  <!-- 模板选择 -->
  <div class="flex justify-center mt-6">
    <label class="mr-2 text-neutral-700 dark:text-neutral-200">选择模板：</label>
    <select id="template-select" class="border rounded px-2 py-1">
      <option value="template1">简约报纸风</option>
      <option value="template2">现代杂志风</option>
    </select>
    <button id="export-img" class="ml-6 px-4 py-1 rounded bg-gradient-to-r from-purple-400 to-pink-500 text-white">导出为图片</button>
    <button id="export-pdf" class="ml-2 px-4 py-1 rounded bg-gradient-to-r from-purple-400 to-pink-500 text-white">导出为PDF</button>
  </div>

  <!-- 主体内容区 -->
  <main class="flex-1 flex justify-center items-start py-8">
    <!-- 广告位左 -->
    <div class="ad-slot select-none">留白<br>以放广告</div>
    <!-- 报纸模板内容 -->
    <section id="newspaper-area" class="newspaper-bg shadow-lg rounded-lg px-8 py-6 mx-2 w-[700px] min-h-[900px] flex flex-col gap-4 transition-colors duration-300">
      <!-- 模板内容由JS动态渲染 -->
    </section>
    <!-- 广告位右 -->
    <div class="ad-slot select-none">留白<br>以放广告</div>
  </main>

  <!-- Footer -->
  <footer class="w-full h-16 flex items-center justify-center bg-white dark:bg-neutral-800 text-neutral-500 dark:text-neutral-400">
    &copy; 2024 Re8ger Newspaper Template
  </footer>

  <script>
    // 模板数据
    const templates = {
      template1: {
        name: '简约报纸风',
        html: `
          <div class="flex flex-col gap-0 font-serif newspaper-bg" style="background:#f5f5e5;">
            <!-- 顶部区 -->
            <div contenteditable="true" class="editable text-center text-base text-neutral-700 mt-2 mb-1 tracking-wide" style="font-family:Times New Roman,serif;">Especial Edition</div>
            <div class="w-full h-px bg-neutral-700"></div>
            <div contenteditable="true" class="editable text-center text-[2.8rem] md:text-6xl font-extrabold tracking-[0.14em] text-neutral-900 leading-tight mb-0.5" style="font-family:Times New Roman,serif; font-weight:600;">BREAKING NEWS</div>
            <div class="w-full h-px bg-neutral-700 mt-2"></div>
            <div class="w-full h-1 bg-neutral-900 mt-0.5 mb-2"></div>
            <!-- 主体区 -->
            <div class="flex flex-row w-full min-h-[320px] gap-0 relative">
              <!-- 左列 2/3 -->
              <div class="w-2/3 pr-6 flex flex-col justify-start">
                <!-- 行1：大图（横向，3:1比例） -->
                <div class="mb-2">
                  <label class="block relative cursor-pointer group w-full">
                    <img id="main-img" src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=900&q=80" class="img-shadow w-full h-[400px] object-cover" alt="主图"/>
                    <input type="file" accept="image/*" class="hidden" onchange="window.uploadImage(event, 'main-img')"/>
                    <span class="absolute bottom-2 right-2 bg-white/80 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">更换图片</span>
                  </label>
                </div>
                <!-- 行2：大标题 -->
                <div contenteditable="true" class="editable mb-1 text-xl font-extrabold tracking-wide text-neutral-900" style="font-family:Times New Roman,serif;">JULIET'S BIRTHDAY NIGHT</div>
                <!-- 行3：正文 -->
                <div contenteditable="true" class="editable text-base text-neutral-900 leading-relaxed" style="font-family:Times New Roman,serif;">
                  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus orci velit, porttitor nec justo eget, fermentum facilisis enim. Nullam ut tincidunt quam. Curabitur in tempus est. Suspendisse sed urna efficitur, eleifend sapien quis, consectetur libero. Aliquam laoreet commodo imperdiet. Nulla facilisi. Duis rhoncus vitae quam in finibus. Maecenas porttitor ultrices dolor at tempus. Sed feugiat felis quis mauris porttitor sollicitudin. Nullam cursus massa vel facilisis auctor. Vivamus vel tincidunt turpis. Integer consectetur elementum vestibulum.
                </div>
              </div>
              <!-- 垂直分割线 -->
              <div class="h-auto w-[2px] bg-neutral-700 absolute left-2/3 top-0 bottom-0"></div>
              <!-- 右列 1/3 -->
              <div class="w-1/3 pl-6 flex flex-col justify-start">
                <!-- 行1：小标题 -->
                <div contenteditable="true" class="editable text-xs font-bold tracking-wide leading-tight mb-1" style="font-family:Times New Roman,serif;">JULIET TELLS US HOW SHE PREPARED FOR HER PARTY.</div>
                <!-- 行2：竖图（右列等宽，竖向比例） -->
                <div class="mb-1">
                  <label class="block relative cursor-pointer group w-full">
                    <img id="side-img" src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=200&q=80" class="img-shadow w-full h-[200px] object-cover" alt="侧图"/>
                    <input type="file" accept="image/*" class="hidden" onchange="window.uploadImage(event, 'side-img')"/>
                    <span class="absolute bottom-2 right-2 bg-white/80 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">更换图片</span>
                  </label>
                </div>
                <!-- 行3：描述 -->
                <div contenteditable="true" class="editable text-base text-neutral-700 leading-snug mb-2" style="font-family:Times New Roman,serif;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi.</div>
                <!-- 行4：分割线 -->
                <div class="w-full h-[2px] bg-neutral-700 my-2"></div>
                <!-- 行5：小标题+横图（横向比例） -->
                <div contenteditable="true" class="editable text-xs font-bold tracking-wide leading-tight mb-1" style="font-family:Times New Roman,serif;">MOM AND DAD, THE MOST ELEGANT OF THE NIGHT.</div>
                <div>
                  <label class="block relative cursor-pointer group w-full">
                    <img id="bottom-img" src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=200&q=80" class="img-shadow w-full h-[200px] object-cover" alt="底部图"/>
                    <input type="file" accept="image/*" class="hidden" onchange="window.uploadImage(event, 'bottom-img')"/>
                    <span class="absolute bottom-2 right-2 bg-white/80 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">更换图片</span>
                  </label>
                </div>
                <div contenteditable="true" class="editable text-base text-neutral-700 leading-snug mb-2" style="font-family:Times New Roman,serif;">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</div>
              </div>
            </div>
            <!-- 底部分割线和信息 -->
            <div class="w-full h-[1px] bg-neutral-700 mt-2 mb-1"></div>
            <div contenteditable="true" class="editable text-xs text-neutral-700 text-center tracking-widest uppercase mb-1" style="font-family:Times New Roman,serif;">MORE INFORMATION AT WWW.REALLYGREATSITE.COM</div>
          </div>
        `
      },
      template2: {
        name: '现代杂志风',
        html: `
          <div class="flex flex-col gap-2">
            <div class="flex items-center justify-between">
              <div contenteditable="true" class="editable text-3xl font-extrabold text-pink-600 dark:text-pink-400 tracking-wide" spellcheck="false">MAGAZINE WEEKLY</div>
              <div contenteditable="true" class="editable text-base text-neutral-500 dark:text-neutral-400" spellcheck="false">2024/06/08</div>
            </div>
            <div class="flex gap-4 mt-4">
              <div class="flex-1 flex flex-col gap-2">
                <div contenteditable="true" class="editable text-xl font-bold text-neutral-900 dark:text-neutral-100" spellcheck="false">THE FUTURE OF AI DESIGN</div>
                <div contenteditable="true" class="editable text-base text-neutral-700 dark:text-neutral-200" spellcheck="false">
                  Discover how AI is transforming the world of design. From generative art to smart layouts, the future is now.
                </div>
                <div class="flex gap-2 mt-2">
                  <img id="mag-img1" src="https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=200&q=80" class="img-shadow w-24 h-24 object-cover" alt="图1"/>
                  <label class="block relative cursor-pointer group">
                    <input type="file" accept="image/*" class="hidden" onchange="window.uploadImage(event, 'mag-img1')"/>
                    <span class="absolute bottom-2 right-2 bg-white/80 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">更换图片</span>
                  </label>
                  <img id="mag-img2" src="https://images.unsplash.com/photo-1465101178521-c1a9136a3b41?auto=format&fit=crop&w=200&q=80" class="img-shadow w-24 h-24 object-cover" alt="图2"/>
                  <label class="block relative cursor-pointer group">
                    <input type="file" accept="image/*" class="hidden" onchange="window.uploadImage(event, 'mag-img2')"/>
                    <span class="absolute bottom-2 right-2 bg-white/80 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">更换图片</span>
                  </label>
                </div>
              </div>
              <div class="w-48 flex flex-col items-center">
                <img id="mag-main-img" src="https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=300&q=80" class="img-shadow w-full h-64 object-cover" alt="主图"/>
                <label class="block relative cursor-pointer group">
                  <input type="file" accept="image/*" class="hidden" onchange="window.uploadImage(event, 'mag-main-img')"/>
                  <span class="absolute bottom-2 right-2 bg-white/80 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition">更换图片</span>
                </label>
              </div>
            </div>
            <div class="mt-4 text-xs text-neutral-500 dark:text-neutral-400 text-center">
              <span contenteditable="true" class="editable underline" spellcheck="false">magazine.re8ger.com</span>
            </div>
          </div>
        `
      }
    };

    // 渲染模板
    function renderTemplate(name) {
      const area = document.getElementById('newspaper-area');
      area.innerHTML = templates[name].html;
    }

    // 图片上传
    window.uploadImage = function(event, imgId) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        document.getElementById(imgId).src = e.target.result;
      };
      reader.readAsDataURL(file);
    };

    // 模板切换
    document.getElementById('template-select').addEventListener('change', function(e) {
      renderTemplate(e.target.value);
    });

    // 初始渲染
    renderTemplate('template1');

    // 导出为图片
    document.getElementById('export-img').onclick = function() {
      html2canvas(document.getElementById('newspaper-area'), {backgroundColor: null}).then(canvas => {
        const link = document.createElement('a');
        link.download = 'newspaper.png';
        link.href = canvas.toDataURL();
        link.click();
      });
    };

    // 导出为PDF
    document.getElementById('export-pdf').onclick = function() {
      html2canvas(document.getElementById('newspaper-area'), {backgroundColor: null}).then(canvas => {
        const imgData = canvas.toDataURL('image/png');
        const pdf = new window.jspdf.jsPDF('p', 'pt', 'a4');
        // 计算自适应宽高
        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        const imgWidth = pageWidth - 40;
        const imgHeight = canvas.height * imgWidth / canvas.width;
        pdf.addImage(imgData, 'PNG', 20, 20, imgWidth, imgHeight);
        pdf.save('newspaper.pdf');
      });
    };

    // 主题切换
    document.getElementById('theme-toggle').onclick = function() {
      document.documentElement.classList.toggle('dark');
    };
  </script>
</body>
</html>